import{j as s,r as a,$ as I,m as y}from"./app-DgdSNlx7.js";import{W as M}from"./welcome-header-DFhecDYk.js";import{W as _}from"./welcome-footer-DFvNBHHG.js";import $ from"./seeMore-DfMURPWp.js";import"./createLucideIcon-DoEx-SFA.js";import"./user-menu-content-CcQW-Hmh.js";import"./index-DUzbLjfl.js";import"./index-zojVbvRF.js";import"./menu-DaI5TJhP.js";function L({isOpen:i,onClose:l,message:o}){return i?s.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md shadow-lg text-center",children:[s.jsx("h2",{className:"text-xl font-bold text-green-600 mb-4",children:"Registro exitoso"}),s.jsx("p",{className:"text-gray-700 mb-6",children:o}),s.jsx("button",{onClick:l,className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600",children:"Cerrar"})]})}):null}function H({eventos:i,inscritos:l=[]}){const[o,c]=a.useState(!1),[x,n]=a.useState(null),[v,u]=a.useState(!1),[d,N]=a.useState(null),[m,S]=a.useState(""),[g,h]=a.useState(l),[b,f]=a.useState([]),k=async e=>{await y.post(`/events/${e}/register`,{},{onSuccess:()=>{h(t=>[...t,e]),c(!0),n(null)},onError:()=>n("Error al inscribirse.")})},E=async e=>{await y.delete(`/events/${e}/unregister`,{onSuccess:()=>{h(t=>t.filter(r=>r!==e)),c(!0),n(null)},onError:()=>n("Error al desinscribirse.")})},C=async e=>{b.includes(e)||(f(t=>[...t,e]),g.includes(e)?await E(e):await k(e),f(t=>t.filter(r=>r!==e)))},p=i.filter(e=>e.name_event.toLowerCase().includes(m.toLowerCase())||e.description_event.toLowerCase().includes(m.toLowerCase())),w=e=>e?e.startsWith("http")||e.startsWith("/storage")?e:`/storage/${e.replace(/^\/+/,"")}`:null;return s.jsxs(s.Fragment,{children:[s.jsx(I,{title:"Eventos disponibles"}),s.jsx(M,{}),s.jsx("div",{className:"min-h-screen bg-white dark:bg-black py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h1",{className:"text-3xl font-bold text-center mb-8 text-gray-800 dark:text-white",children:"Eventos disponibles"}),x&&s.jsx("div",{className:"mb-6 text-center text-red-600 font-semibold",children:x}),s.jsx("div",{className:"mb-6",children:s.jsx("input",{type:"text",placeholder:"Buscar evento...",value:m,onChange:e=>S(e.target.value),className:"w-full p-3 border rounded shadow-sm bg-white dark:bg-gray-800 dark:text-white dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-400"})}),s.jsxs("div",{className:"space-y-8",children:[p.map(e=>{const t=g.includes(e.id),r=b.includes(e.id),j=w(e.image_event);return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden flex flex-col md:flex-row items-center",children:[j?s.jsx("img",{src:j,alt:e.name_event,className:"w-full md:w-1/3 h-64 object-cover"}):s.jsx("div",{className:"w-full md:w-1/3 h-64 bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-gray-500 dark:text-gray-300",children:"Sin imagen"}),s.jsxs("div",{className:"p-6 flex-1 flex flex-col items-center md:items-start",children:[s.jsx("h2",{className:"text-2xl font-semibold mb-2 text-center md:text-left text-gray-800 dark:text-white",children:e.name_event}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4 text-center md:text-left",children:e.description_event}),s.jsxs("div",{className:"flex gap-4 flex-wrap justify-center md:justify-start",children:[s.jsx("button",{onClick:()=>{N(e),u(!0)},className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Ver más"}),s.jsx("button",{onClick:()=>C(e.id),disabled:r,className:`
                                                    ${t?"bg-gray-400 hover:bg-gray-500":"bg-green-500 hover:bg-green-600"}
                                                    text-white px-4 py-2 rounded
                                                    ${r?"opacity-50 cursor-not-allowed":""}
                                                `,children:r?"Procesando...":t?"Inscrito (Cancelar)":"Inscribirme"})]})]})]},e.id)}),p.length===0&&s.jsx("p",{className:"text-center text-gray-500 dark:text-gray-300",children:"No se encontraron eventos que coincidan con la búsqueda."})]})]})}),s.jsx(_,{}),s.jsx(L,{isOpen:o,onClose:()=>c(!1),message:"¡Operación realizada exitosamente!"}),v&&d&&s.jsx($,{event:{...d,image_event:w(d.image_event)||null},onClose:()=>u(!1)})]})}export{H as default};
