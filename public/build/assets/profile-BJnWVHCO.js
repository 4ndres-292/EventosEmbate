import{j as e,r as l,v as _,q as W,a as I,$ as Y,Y as $}from"./app-CzVmZtfW.js";import{L as m,I as p}from"./label-S1uJepHw.js";import{d as f,B as k}from"./createLucideIcon-C4FpBpIs.js";import{I as h}from"./input-4j1x0UNz.js";import{H as q,S as X}from"./layout-DbgrHM0A.js";import{r as J,T as K,s as Q,t as R,X as V,v as Z,w as ee,x as ae,O as te}from"./user-menu-content-m1g4v7Xj.js";import{W as re}from"./welcome-header-Br9NXzxw.js";import{z as se}from"./transition-CyFkmz5i.js";import"./index-BgayEusA.js";import"./index-l_VIlqz7.js";import"./menu-LRYBf0MN.js";function ne({...t}){return e.jsx(J,{"data-slot":"dialog",...t})}function ie({...t}){return e.jsx(K,{"data-slot":"dialog-trigger",...t})}function oe({...t}){return e.jsx(ae,{"data-slot":"dialog-portal",...t})}function de({...t}){return e.jsx(R,{"data-slot":"dialog-close",...t})}function le({className:t,...s}){return e.jsx(te,{"data-slot":"dialog-overlay",className:f("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",t),...s})}function ce({className:t,children:s,...n}){return e.jsxs(oe,{"data-slot":"dialog-portal",children:[e.jsx(le,{}),e.jsxs(Q,{"data-slot":"dialog-content",className:f("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...n,children:[s,e.jsxs(R,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(V,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function ue({className:t,...s}){return e.jsx("div",{"data-slot":"dialog-footer",className:f("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...s})}function me({className:t,...s}){return e.jsx(Z,{"data-slot":"dialog-title",className:f("text-lg leading-none font-semibold",t),...s})}function pe({className:t,...s}){return e.jsx(ee,{"data-slot":"dialog-description",className:f("text-muted-foreground text-sm",t),...s})}function ge(){const t=l.useRef(null),{data:s,setData:n,delete:c,processing:i,reset:b,errors:u,clearErrors:o}=_({password:""}),N=x=>{x.preventDefault(),c(route("profile.destroy"),{preserveScroll:!0,onSuccess:()=>j(),onError:()=>{var v;return(v=t.current)==null?void 0:v.focus()},onFinish:()=>b()})},j=()=>{o(),b()};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(q,{title:"Eliminar cuenta",description:"Elimina tu cuenta y todos sus recursos"}),e.jsxs("div",{className:"space-y-4 rounded-lg border border-red-100 bg-red-50 p-4 dark:border-red-200/10 dark:bg-red-700/10",children:[e.jsxs("div",{className:"relative space-y-0.5 text-red-600 dark:text-red-100",children:[e.jsx("p",{className:"font-medium",children:"Advertencia"}),e.jsx("p",{className:"text-sm",children:"Proceda con precaución, esto no se puede deshacer."})]}),e.jsxs(ne,{children:[e.jsx(ie,{asChild:!0,children:e.jsx(k,{variant:"destructive",children:"Eliminar cuenta"})}),e.jsxs(ce,{children:[e.jsx(me,{children:"¿Estás seguro que deseas eliminar tu cuenta?"}),e.jsx(pe,{children:"Una vez eliminada su cuenta, todos sus recursos y datos también se eliminarán permanentemente. Ingrese su contraseña para confirmar que desea eliminar su cuenta permanentemente."}),e.jsxs("form",{className:"space-y-6",onSubmit:N,children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"password",className:"sr-only",children:"Contraseña"}),e.jsx(h,{id:"password",type:"password",name:"password",ref:t,value:s.password,onChange:x=>n("password",x.target.value),placeholder:"Password",autoComplete:"current-password"}),e.jsx(p,{message:u.password})]}),e.jsxs(ue,{className:"gap-2",children:[e.jsx(de,{asChild:!0,children:e.jsx(k,{variant:"secondary",onClick:j,children:"Cancelar"})}),e.jsx(k,{variant:"destructive",disabled:i,asChild:!0,children:e.jsx("button",{type:"submit",children:"Eliminar cuenta"})})]})]})]})]})]})]})}function ze({mustVerifyEmail:t,status:s}){const{auth:n}=W().props,{data:c,setData:i,patch:b,errors:u,processing:o,recentlySuccessful:N}=_({name:n.user.name||"",email:n.user.email||"",phone:n.user.phone||"",gender:n.user.gender||"Masculino",birthdate:n.user.birthdate||"",type_participant:n.user.type_participant||"",career:n.user.career||"",institution:n.user.institution||""}),[j,x]=l.useState([]),[v,E]=l.useState([]),[P,F]=l.useState([]),[L,C]=l.useState([]),[M,y]=l.useState(!1),[T,z]=l.useState([]),[U,w]=l.useState(!1),S=l.useRef(null),D=l.useRef(null);l.useEffect(()=>{I.get("/api/participant-types").then(r=>{x(r.data.map(d=>d.name))}).catch(()=>{x(["Estudiante","Universitario","Docente","Administrativo","Emprendedor","Empresario"])}),I.get("/api/career-types").then(r=>{const d=r.data.map(g=>g.name);E(d),C(d)}).catch(()=>{const r=["Ingeniería de Sistemas","Ingeniería Electrónica","Ingeniería Industrial","Ingeniería Civil","Ingeniería Mecánica"];E(r),C(r)}),I.get("/api/institutions").then(r=>{const d=r.data.map(g=>g.name);F(d),z(d)}).catch(()=>{F([]),z([])});function a(r){S.current&&!S.current.contains(r.target)&&y(!1),D.current&&!D.current.contains(r.target)&&w(!1)}return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);const H=a=>{a.preventDefault(),b(route("profile.update"),{preserveScroll:!0})},O=a=>{const r=a.target.value;i("career",r);const d=v.filter(g=>g.toLowerCase().includes(r.toLowerCase()));C(d),y(!0)},A=a=>{i("career",a),y(!1)},G=a=>{const r=a.target.value;i("institution",r);const d=P.filter(g=>g.toLowerCase().includes(r.toLowerCase()));z(d),w(!0)},B=a=>{i("institution",a),w(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(re,{}),e.jsx(Y,{title:"Configuración del perfil"}),e.jsxs(X,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(q,{title:"Información del perfil",description:"Actualice sus datos"}),e.jsxs("form",{onSubmit:H,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"name",children:"Nombre"}),e.jsx(h,{id:"name",className:"mt-1 block w-full bg-white dark:bg-zinc-900 text-black dark:text-white border border-gray-300 dark:border-gray-700 rounded-md",value:c.name,onChange:a=>i("name",a.target.value),required:!0,autoComplete:"name",placeholder:"Nombre completo",disabled:o}),e.jsx(p,{className:"mt-2",message:u.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"email",children:"Correo electrónico"}),e.jsx(h,{id:"email",type:"email",className:"mt-1 block w-full bg-white dark:bg-zinc-900 text-black dark:text-white border border-gray-300 dark:border-gray-700 rounded-md",value:c.email,onChange:a=>i("email",a.target.value),required:!0,autoComplete:"username",placeholder:"Correo electrónico",disabled:o}),e.jsx(p,{className:"mt-2",message:u.email})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"phone",children:"Teléfono celular"}),e.jsx(h,{id:"phone",type:"tel",className:"mt-1 block w-full bg-white dark:bg-zinc-900 text-black dark:text-white border border-gray-300 dark:border-gray-700 rounded-md",value:c.phone,onChange:a=>i("phone",a.target.value),required:!0,placeholder:"Teléfono celular",disabled:o}),e.jsx(p,{className:"mt-2",message:u.phone})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"gender",children:"Género"}),e.jsxs("select",{id:"gender",required:!0,className:"mt-1 block w-full bg-white dark:bg-zinc-900 text-black dark:text-white border border-gray-300 dark:border-gray-700 rounded-md p-2",value:c.gender,onChange:a=>i("gender",a.target.value),disabled:o,children:[e.jsx("option",{value:"Masculino",children:"Masculino"}),e.jsx("option",{value:"Femenino",children:"Femenino"})]}),e.jsx(p,{className:"mt-2",message:u.gender})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"birthdate",children:"Fecha de nacimiento"}),e.jsx(h,{id:"birthdate",type:"date",className:"mt-1 block w-full bg-white dark:bg-zinc-900 text-black dark:text-white border border-gray-300 dark:border-gray-700 rounded-md",value:c.birthdate,onChange:a=>i("birthdate",a.target.value),required:!0,disabled:o}),e.jsx(p,{className:"mt-2",message:u.birthdate})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"type_participant",children:"Tipo de participante"}),e.jsxs("select",{id:"type_participant",required:!0,className:"mt-1 block w-full bg-white dark:bg-zinc-900 text-black dark:text-white border border-gray-300 dark:border-gray-700 rounded-md p-2",value:c.type_participant||"",onChange:a=>i("type_participant",a.target.value),disabled:o,children:[e.jsx("option",{value:"",children:"Seleccione un tipo"}),j.map(a=>e.jsx("option",{value:a,children:a},a))]}),e.jsx(p,{className:"mt-2",message:u.type_participant})]}),e.jsxs("div",{className:"relative",ref:S,children:[e.jsx(m,{htmlFor:"career",children:"Carrera"}),e.jsx(h,{id:"career",type:"text",value:c.career||"",onChange:O,onClick:()=>y(!0),placeholder:"Escriba su carrera",className:"w-full bg-white dark:bg-zinc-900 text-black dark:text-white border border-gray-300 dark:border-gray-700 rounded-md",disabled:o,autoComplete:"off"}),M&&L.length>0&&e.jsx("div",{className:"absolute z-10 w-full bg-white dark:bg-zinc-900 border border-gray-300 dark:border-gray-700 rounded-md shadow-md max-h-40 overflow-y-auto",children:L.map(a=>e.jsx("div",{className:"p-2 cursor-pointer hover:bg-gray-100 dark:hover:bg-zinc-800",onClick:()=>A(a),children:a},a))}),e.jsx(p,{className:"mt-2",message:u.career})]}),e.jsxs("div",{className:"relative",ref:D,children:[e.jsx(m,{htmlFor:"institution",children:"Institución"}),e.jsx(h,{id:"institution",type:"text",value:c.institution,onChange:G,onClick:()=>w(!0),placeholder:"Escriba su institución",className:"w-full bg-white dark:bg-zinc-900 text-black dark:text-white border border-gray-300 dark:border-gray-700 rounded-md",disabled:o,autoComplete:"off"}),U&&T.length>0&&e.jsx("div",{className:"absolute z-10 w-full bg-white dark:bg-zinc-900 border border-gray-300 dark:border-gray-700 rounded-md shadow-md max-h-40 overflow-y-auto",children:T.map(a=>e.jsx("div",{className:"p-2 cursor-pointer hover:bg-gray-100 dark:hover:bg-zinc-800",onClick:()=>B(a),children:a},a))}),e.jsx(p,{className:"mt-2",message:u.institution})]}),t&&n.user.email_verified_at===null&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-muted-foreground -mt-4 text-sm dark:text-neutral-400",children:["Tu dirección de correo electrónico no está verificada."," ",e.jsx($,{href:route("verification.send"),method:"post",as:"button",className:"text-foreground underline decoration-neutral-300 underline-offset-4 transition-colors duration-300 ease-out hover:decoration-current dark:decoration-neutral-500",children:"Haz clic aquí para reenviar el correo de verificación."})]}),s==="verification-link-sent"&&e.jsx("div",{className:"mt-2 text-sm font-medium text-green-600 dark:text-green-400",children:"Un nuevo enlace de verificación ha sido enviado a tu dirección de correo electrónico."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(k,{disabled:o,children:"Guardar"}),e.jsx(se,{show:N,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:"Guardado"})})]})]})]}),e.jsx(ge,{})]})]})}export{ze as default};
