import{r as i,a as m,j as s}from"./app-DGaXkyY2.js";import{B as f}from"./createLucideIcon-zON5ncLs.js";import{I as j}from"./input-Bt9boKtE.js";import{W as g}from"./welcome-header-Bfh4zIzq.js";import"./user-menu-content-Kef8tJ5h.js";import"./index-CFjtJNlf.js";import"./index-D9WHxDIS.js";import"./menu-Bm3dPLee.js";function B(){const[t,u]=i.useState(""),[l,r]=i.useState([]),[o,d]=i.useState(!1),[p,c]=i.useState(null);i.useEffect(()=>{if(t.length<3){r([]);return}const e=setTimeout(()=>{d(!0),m.get("/users/search",{params:{email:t}}).then(a=>{r(a.data)}).finally(()=>d(!1))},500);return()=>clearTimeout(e)},[t]);const x=(e,a)=>{c(e),m.post("/users/update-role",{user_id:e,type_user_id:a}).then(()=>{r(h=>h.map(n=>n.id===e?{...n,type_user_id:a}:n))}).finally(()=>c(null))};return s.jsxs(s.Fragment,{children:[s.jsx(g,{}),s.jsxs("div",{className:"max-w-3xl mx-auto p-6",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Buscar usuarios y cambiar rol"}),s.jsx(j,{type:"text",placeholder:"Buscar usuario por correo...",value:t,onChange:e=>u(e.target.value),className:"mb-6"}),o&&s.jsx("p",{children:"Cargando usuarios..."}),l.length===0&&t.length>=3&&!o&&s.jsx("p",{children:"No se encontraron usuarios."}),s.jsx("div",{className:"space-y-4",children:l.map(e=>s.jsxs("div",{className:"flex items-center justify-between border p-3 rounded-md",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold",children:e.name}),s.jsx("p",{className:"text-sm text-gray-600",children:e.email}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Rol actual: ",e.type_user_id===1?"Administrador":e.type_user_id===2?"Supervisor":"Estudiante"]})]}),s.jsx("div",{className:"flex gap-2",children:[1,2,3].map(a=>s.jsx(f,{disabled:p===e.id||e.type_user_id===a,variant:e.type_user_id===a?"default":"outline",onClick:()=>x(e.id,a),children:a===1?"Administrador":a===2?"Supervisor":"Estudiante"},a))})]},e.id))})]})]})}export{B as default};
