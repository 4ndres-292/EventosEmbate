import{m as z,r as o,a as h,j as e,L as A}from"./app-CHsi7JEc.js";import{L as l,I as c,a as d}from"./label-CAz9Z9lk.js";import{T as B}from"./text-link-ChDkZnSW.js";import{B as U}from"./createLucideIcon-mrHwe_s8.js";import{A as G,L as P}from"./auth-layout-DqgCxp-S.js";import"./index-gxRL8_kl.js";import"./app-logo-icon-CfDs6yaF.js";function W(){const{data:i,setData:s,post:C,processing:r,errors:n,reset:N}=z({name:"",phone:"",gender:"Masculino",birthdate:"",type_participant:"",career:"",institution:"",email:"",password:"",password_confirmation:""}),[I,y]=o.useState([]),[x,F]=o.useState([]),[g,L]=o.useState([]),[j,v]=o.useState(x),[b,f]=o.useState(g),[_,m]=o.useState(!1),[S,u]=o.useState(!1);o.useEffect(()=>{h.get("api/participant-types").then(a=>{y(a.data.map(t=>t.name))}),h.get("/api/career-types").then(a=>{F(a.data.map(t=>t.name)),v(a.data.map(t=>t.name))}),h.get("/api/institutions").then(a=>{L(a.data.map(t=>t.name)),f(a.data.map(t=>t.name))})},[]);const q=a=>{a.preventDefault(),C(route("register"),{onFinish:()=>N("password","password_confirmation")})},R=o.useRef(null),T=o.useRef(null),w=i.type_participant==="Universitario",D=a=>{const t=a.target.value;s("career",t),v(x.filter(p=>p.toLowerCase().includes(t.toLowerCase()))),m(!0)},k=a=>{s("career",a),m(!1)},E=a=>{const t=a.target.value;s("institution",t),f(g.filter(p=>p.toLowerCase().includes(t.toLowerCase()))),u(!0)},M=a=>{s("institution",a),u(!1)};return e.jsxs(G,{title:"Crear una cuenta",description:"Ingrese los datos a continuación para crear su cuenta",children:[e.jsx(A,{title:"Registro"}),e.jsxs("form",{className:"flex flex-col gap-6",onSubmit:q,children:[e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"name",children:"Nombre"}),e.jsx(c,{id:"name",type:"text",required:!0,autoFocus:!0,tabIndex:1,autoComplete:"name",value:i.name,onChange:a=>s("name",a.target.value),disabled:r,placeholder:"Nombre completo"}),e.jsx(d,{message:n.name,className:"mt-2"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"phone",children:"Teléfono celular"}),e.jsx(c,{id:"phone",type:"tel",required:!0,tabIndex:2,autoComplete:"phone",value:i.phone,onChange:a=>s("phone",a.target.value),disabled:r,placeholder:"Teléfono celular"}),e.jsx(d,{message:n.phone,className:"mt-2"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"gender",children:"Género"}),e.jsxs("select",{id:"gender",required:!0,tabIndex:3,value:i.gender,onChange:a=>s("gender",a.target.value),disabled:r,className:"border p-1 rounded-md",children:[e.jsx("option",{value:"Masculino",children:"Masculino"}),e.jsx("option",{value:"Femenino",children:"Femenino"})]}),e.jsx(d,{message:n.gender,className:"mt-2"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"birthdate",children:"Fecha de nacimiento"}),e.jsx(c,{id:"birthdate",type:"date",required:!0,tabIndex:4,autoComplete:"birthdate",value:i.birthdate,onChange:a=>s("birthdate",a.target.value),disabled:r}),e.jsx(d,{message:n.birthdate,className:"mt-2"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"type_participant",children:"Tipo de participante"}),e.jsxs("select",{id:"type_participant",required:!0,tabIndex:5,value:i.type_participant||"",onChange:a=>s("type_participant",a.target.value),disabled:r,className:"border p-1 rounded-md",children:[e.jsx("option",{value:"",children:"Seleccione un tipo"}),I.map(a=>e.jsx("option",{value:a,children:a},a))]}),e.jsx(d,{message:n.type_participant,className:"mt-2"})]}),w&&e.jsxs("div",{className:"relative",ref:T,children:[e.jsxs(l,{htmlFor:"career",children:["Carrera ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(c,{id:"career",type:"text",tabIndex:6,value:i.career||"",required:w,onChange:D,onClick:()=>m(!0),disabled:r,placeholder:"Escriba su carrera",className:"w-full"}),_&&j.length>0&&e.jsx("div",{className:"absolute z-10 w-full bg-white border rounded-md shadow-md max-h-40 overflow-y-auto",children:j.map(a=>e.jsx("div",{className:"p-2 hover:bg-gray-100 cursor-pointer",onClick:()=>k(a),children:a},a))}),e.jsx(d,{message:n.career,className:"mt-2"})]}),e.jsxs("div",{className:"relative",ref:R,children:[e.jsxs(l,{htmlFor:"institution",children:["Institución ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(c,{id:"institution",type:"text",tabIndex:7,autoComplete:"institution",required:!0,value:i.institution,onChange:E,onClick:()=>u(!0),disabled:r,placeholder:"Institución a la que pertenece"}),S&&b.length>0&&e.jsx("div",{className:"absolute z-10 w-full bg-white border rounded-md shadow-md max-h-40 overflow-y-auto",children:b.map(a=>e.jsx("div",{className:"p-2 hover:bg-gray-100 cursor-pointer",onClick:()=>M(a),children:a},a))}),e.jsx(d,{message:n.institution,className:"mt-2"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"email",children:"Correo electrónico"}),e.jsx(c,{id:"email",type:"email",required:!0,tabIndex:8,autoComplete:"email",value:i.email,onChange:a=>s("email",a.target.value),disabled:r,placeholder:"email@example.com"}),e.jsx(d,{message:n.email})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"password",children:"Contraseña"}),e.jsx(c,{id:"password",type:"password",required:!0,tabIndex:9,autoComplete:"new-password",value:i.password,onChange:a=>s("password",a.target.value),disabled:r,placeholder:"Contraseña"}),e.jsx(d,{message:n.password})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"password_confirmation",children:"Confirmar contraseña"}),e.jsx(c,{id:"password_confirmation",type:"password",required:!0,tabIndex:10,autoComplete:"new-password",value:i.password_confirmation,onChange:a=>s("password_confirmation",a.target.value),disabled:r,placeholder:"Confirmar contraseña"}),e.jsx(d,{message:n.password_confirmation})]}),e.jsxs(U,{type:"submit",className:"mt-2 w-full",tabIndex:11,disabled:r,children:[r&&e.jsx(P,{className:"h-4 w-4 animate-spin"}),"Crear cuenta"]})]}),e.jsxs("div",{className:"text-muted-foreground text-center text-sm",children:["¿Ya tienes una cuenta?"," ",e.jsx(B,{href:route("login"),tabIndex:12,children:"Iniciar sesión"})]})]})]})}export{W as default};
