import{j as s,r as n,L as C,S as j}from"./app-CHsi7JEc.js";import{W as I}from"./welcome-header-D5GI_jXU.js";import{W as L}from"./welcome-footer-Ba_xne5w.js";import M from"./seeMore-Dc6wE81f.js";import"./createLucideIcon-mrHwe_s8.js";import"./user-menu-content-CnPhVYhi.js";import"./index-JXqAD3Oy.js";import"./index-gxRL8_kl.js";import"./menu-Fh9G23AZ.js";function _({isOpen:l,onClose:o,message:c}){return l?s.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md shadow-lg text-center",children:[s.jsx("h2",{className:"text-xl font-bold text-green-600 mb-4",children:"Registro exitoso"}),s.jsx("p",{className:"text-gray-700 mb-6",children:c}),s.jsx("button",{onClick:o,className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600",children:"Cerrar"})]})}):null}function B({eventos:l,inscritos:o=[]}){const[c,i]=n.useState(!1),[m,a]=n.useState(null),[w,x]=n.useState(!1),[u,v]=n.useState(null),[d,N]=n.useState(""),[h,g]=n.useState(o),[p,f]=n.useState([]),y=async e=>{await j.post(`/events/${e}/register`,{},{onSuccess:()=>{g(t=>[...t,e]),i(!0),a(null)},onError:()=>{a("Error al inscribirse.")}})},S=async e=>{await j.delete(`/events/${e}/unregister`,{onSuccess:()=>{g(t=>t.filter(r=>r!==e)),i(!0),a(null)},onError:()=>{a("Error al desinscribirse.")}})},E=async e=>{p.includes(e)||(f(t=>[...t,e]),h.includes(e)?await S(e):await y(e),f(t=>t.filter(r=>r!==e)))},b=l.filter(e=>e.name_event.toLowerCase().includes(d.toLowerCase())||e.description_event.toLowerCase().includes(d.toLowerCase()));return s.jsxs(s.Fragment,{children:[s.jsx(C,{title:"Eventos disponibles"}),s.jsx(I,{}),s.jsx("div",{className:"min-h-screen bg-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h1",{className:"text-3xl font-bold text-center mb-8",children:"Eventos disponibles"}),m&&s.jsx("div",{className:"mb-6 text-center text-red-600 font-semibold",children:m}),s.jsx("div",{className:"mb-6",children:s.jsx("input",{type:"text",placeholder:"Buscar evento...",value:d,onChange:e=>N(e.target.value),className:"w-full p-3 border rounded shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-400"})}),s.jsxs("div",{className:"space-y-8",children:[b.map(e=>{const t=h.includes(e.id),r=p.includes(e.id);return s.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden flex flex-col md:flex-row items-center",children:[e.image_event&&s.jsx("img",{src:`/${e.image_event}`,alt:e.name_event,className:"w-full md:w-1/3 h-64 object-cover"}),s.jsxs("div",{className:"p-6 flex-1 flex flex-col items-center md:items-start",children:[s.jsx("h2",{className:"text-2xl font-semibold mb-2 text-center md:text-left",children:e.name_event}),s.jsx("p",{className:"text-gray-600 mb-4 text-center md:text-left",children:e.description_event}),s.jsxs("div",{className:"flex gap-4 flex-wrap justify-center md:justify-start",children:[s.jsx("button",{onClick:()=>{v(e),x(!0)},className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Ver más"}),s.jsx("button",{onClick:()=>E(e.id),disabled:r,className:`
                                                    ${t?"bg-gray-400 hover:bg-gray-500":"bg-green-500 hover:bg-green-600"}
                                                    text-white px-4 py-2 rounded
                                                    ${r?"opacity-50 cursor-not-allowed":""}
                                                `,children:r?"Procesando...":t?"Inscrito (Cancelar)":"Inscribirme"})]})]})]},e.id)}),b.length===0&&s.jsx("p",{className:"text-center text-gray-500",children:"No se encontraron eventos que coincidan con la búsqueda."})]})]})}),s.jsx(L,{}),s.jsx(_,{isOpen:c,onClose:()=>i(!1),message:"¡Operación realizada exitosamente!"}),w&&u&&s.jsx(M,{event:u,onClose:()=>x(!1)})]})}export{B as default};
