import{j as s,r as a,L as E,S as w}from"./app-CSxVKq7s.js";import{W as C}from"./welcome-header-OmNsSVva.js";import{W as I}from"./welcome-footer-BYbiQM-k.js";import L from"./seeMore-BoGgpuBT.js";import"./button-az5_naOT.js";import"./user-menu-content-GXM8WO-S.js";import"./index-CE-URAxI.js";import"./index-Cnvso2EB.js";import"./createLucideIcon-aEhmQRez.js";import"./menu-DggNzfOL.js";function M({isOpen:i,onClose:o,message:l}){return i?s.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md shadow-lg text-center",children:[s.jsx("h2",{className:"text-xl font-bold text-green-600 mb-4",children:"Registro exitoso"}),s.jsx("p",{className:"text-gray-700 mb-6",children:l}),s.jsx("button",{onClick:o,className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600",children:"Cerrar"})]})}):null}function H({eventos:i,inscritos:o=[]}){const[l,c]=a.useState(!1),[x,n]=a.useState(null),[j,m]=a.useState(!1),[u,y]=a.useState(null),[d,v]=a.useState(""),[g,h]=a.useState(o),[b,p]=a.useState([]),N=async e=>{await w.post(`/events/${e}/register`,{},{onSuccess:()=>{h(t=>[...t,e]),c(!0),n(null)},onError:()=>n("Error al inscribirse.")})},S=async e=>{await w.delete(`/events/${e}/unregister`,{onSuccess:()=>{h(t=>t.filter(r=>r!==e)),c(!0),n(null)},onError:()=>n("Error al desinscribirse.")})},k=async e=>{b.includes(e)||(p(t=>[...t,e]),g.includes(e)?await S(e):await N(e),p(t=>t.filter(r=>r!==e)))},f=i.filter(e=>e.name_event.toLowerCase().includes(d.toLowerCase())||e.description_event.toLowerCase().includes(d.toLowerCase()));return s.jsxs(s.Fragment,{children:[s.jsx(E,{title:"Eventos disponibles"}),s.jsx(C,{}),s.jsx("div",{className:"min-h-screen bg-white dark:bg-black py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h1",{className:"text-3xl font-bold text-center mb-8 text-gray-800 dark:text-white",children:"Eventos disponibles"}),x&&s.jsx("div",{className:"mb-6 text-center text-red-600 font-semibold",children:x}),s.jsx("div",{className:"mb-6",children:s.jsx("input",{type:"text",placeholder:"Buscar evento...",value:d,onChange:e=>v(e.target.value),className:"w-full p-3 border rounded shadow-sm bg-white dark:bg-gray-800 dark:text-white dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-400"})}),s.jsxs("div",{className:"space-y-8",children:[f.map(e=>{const t=g.includes(e.id),r=b.includes(e.id);return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden flex flex-col md:flex-row items-center",children:[e.image_event&&s.jsx("img",{src:`/${e.image_event}`,alt:e.name_event,className:"w-full md:w-1/3 h-64 object-cover"}),s.jsxs("div",{className:"p-6 flex-1 flex flex-col items-center md:items-start",children:[s.jsx("h2",{className:"text-2xl font-semibold mb-2 text-center md:text-left text-gray-800 dark:text-white",children:e.name_event}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4 text-center md:text-left",children:e.description_event}),s.jsxs("div",{className:"flex gap-4 flex-wrap justify-center md:justify-start",children:[s.jsx("button",{onClick:()=>{y(e),m(!0)},className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Ver más"}),s.jsx("button",{onClick:()=>k(e.id),disabled:r,className:`
                                                    ${t?"bg-gray-400 hover:bg-gray-500":"bg-green-500 hover:bg-green-600"}
                                                    text-white px-4 py-2 rounded
                                                    ${r?"opacity-50 cursor-not-allowed":""}
                                                `,children:r?"Procesando...":t?"Inscrito (Cancelar)":"Inscribirme"})]})]})]},e.id)}),f.length===0&&s.jsx("p",{className:"text-center text-gray-500 dark:text-gray-300",children:"No se encontraron eventos que coincidan con la búsqueda."})]})]})}),s.jsx(I,{}),s.jsx(M,{isOpen:l,onClose:()=>c(!1),message:"¡Operación realizada exitosamente!"}),j&&u&&s.jsx(L,{event:u,onClose:()=>m(!1)})]})}export{H as default};
